// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Sekolah  {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  email String @unique
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  tingkatan Tingkatan[]
  guru Guru[]
  siswa Siswa[]
}

model Tingkatan {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  sekolahId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  mataPelajaran MataPelajaran[]
  kelas Kelas[]

  sekolah Sekolah @relation(fields: [sekolahId], references: [id])
}

model Kelas {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  tingkatanId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  siswa Siswa[]

  tingkatan Tingkatan @relation(fields: [tingkatanId], references:[id])
}

model Siswa {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  NISN String
  kelasId Int
  sekolahId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  kelas Kelas @relation(fields: [kelasId], references:[id])
  sekolah Sekolah @relation(fields: [sekolahId], references: [id])
}

model MataPelajaran {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  tingkatanId Int
  guruId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tingkatan Tingkatan @relation(fields: [tingkatanId], references:[id])
  guru Guru @relation(fields: [guruId], references:[id])
}

model Guru {
  id Int @default(autoincrement()) @id
  uuid String @default(uuid())
  nama String
  NIP String
  sekolahId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  mataPelajaran MataPelajaran[]

  sekolah Sekolah @relation(fields: [sekolahId], references: [id])
}